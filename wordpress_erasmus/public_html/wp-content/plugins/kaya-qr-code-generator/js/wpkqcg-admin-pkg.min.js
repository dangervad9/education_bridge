var wpkqcg_shortcode_curent={},wpkqcg_shortcode_settings={};function wpkqcg_qrcode_sc_gen(e,t){var c,o,n,r=e.value,g=e.type,s=document.getElementById("wpkqcg_shortcode_generator_sc_name").value,d=document.getElementById("wpkqcg_shortcode_generator_sc_name_dynamic").value,l=JSON.parse(document.getElementById("wpkqcg_shortcode_generator_fields_default").value);0===Object.keys(wpkqcg_shortcode_curent).length&&Object.keys(l).forEach(function(e){wpkqcg_shortcode_curent[e]=l[e]}),"checkbox"!=g||e.checked?(wpkqcg_shortcode_curent[t]=r,"content"===t&&(wpkqcg_shortcode_settings[t]=r)):wpkqcg_shortcode_curent[t]="","dynamic_content"===t&&(wpkqcg_shortcode_curent[t]="",e.checked?wpkqcg_shortcode_settings[t]=r:wpkqcg_shortcode_settings[t]=""),void 0!==wpkqcg_shortcode_settings.dynamic_content&&""!==wpkqcg_shortcode_settings.dynamic_content?(o="]",void 0!==wpkqcg_shortcode_settings.content&&""!=wpkqcg_shortcode_settings.content&&(o+=wpkqcg_shortcode_settings.content,wpkqcg_shortcode_curent.content=""),c="["+d,n="[/"+d+"]"):(o="",void 0!==wpkqcg_shortcode_settings.content&&""!=wpkqcg_shortcode_settings.content&&(wpkqcg_shortcode_curent.content=wpkqcg_shortcode_settings.content),c="["+s,n="]");var a=c;return Object.keys(wpkqcg_shortcode_curent).forEach(function(e){if(""!=wpkqcg_shortcode_curent[e]){"size"!=e||wpkqcg_qrcode_isInt(wpkqcg_shortcode_curent[e])||(wpkqcg_shortcode_curent[e]="");var t=wpkqcg_qrcode_escapeHtml(wpkqcg_shortcode_curent[e]);a+=" "+e+'="'+t+'"'}}),a+=o,a+=n,document.getElementById("wpkqcg_shortcode_generator_display").innerHTML=a,void 0!==wpkqcg_shortcode_settings.dynamic_content&&""!==wpkqcg_shortcode_settings.dynamic_content&&void 0!==wpkqcg_shortcode_settings.content&&""!=wpkqcg_shortcode_settings.content&&(wpkqcg_shortcode_curent.content=wpkqcg_shortcode_settings.content),wpkqcg_qrcode_preview_gen(wpkqcg_shortcode_curent),wpkqcg_qrcode_preview_display(),!1}function wpkqcg_qrcode_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function wpkqcg_qrcode_isInt(e){var t;return!isNaN(e)&&(0|(t=parseFloat(e)))===t}function wpkqcg_qrcode_preview_gen(e){var t=document.getElementsByClassName("wpkqcg_qrcode"),c=["ecclevel","size","border","color","bgcolor","content"];if(0!==t.length)for(var o=0;o<t.length;++o)for(var n=t[o],r=Object.keys(e),g=0;g<r.length;g++){var s=r[g];c.indexOf(s)>-1&&(document.getElementById(n.id+"_"+s).value=e[s])}}function wpkqcg_qrcode_preview_display(){var e=document.getElementsByClassName("wpkqcg_qrcode"),t=document.getElementById("wpkqcg_shortcode_generator_content_url_admin").value,c=document.getElementById("wpkqcg_shortcode_generator_content_url_default").value;if(0!==e.length)for(var o=0;o<e.length;++o){var n=e[o],r=document.getElementById(n.id+"_ecclevel"),g=document.getElementById(n.id+"_size"),s=document.getElementById(n.id+"_border"),d=document.getElementById(n.id+"_color"),l=document.getElementById(n.id+"_bgcolor"),a=document.getElementById(n.id+"_content");wpkqcg_qrcode_isInt(g.value)||(g.value=""),wpkqcg_qrcode_isInt(s.value)||(s.value="4"),(a.value==t||""==a.value)&&(a.value=c),wpkqcg_qrcode_encode([n.id,a.value,r.value,g.value,s.value,d.value,l.value]),""!==a.value?(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="block",document.getElementById("wpkqcg_shortcode_generator_preview_permalink_alert").style.display="none",document.getElementById("wpkqcg_shortcode_generator_preview_dynamic_alert").style.display="none",void 0!==wpkqcg_shortcode_settings.dynamic_content&&""!==wpkqcg_shortcode_settings.dynamic_content&&(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="none",document.getElementById("wpkqcg_shortcode_generator_preview_dynamic_alert").style.display="block")):(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="none",document.getElementById("wpkqcg_shortcode_generator_preview_permalink_alert").style.display="block")}}function wpkqcg_qrcode_preview_download(){var e=document.getElementsByClassName("wpkqcg_qrcode");if(0!==e.length)for(var t=0;t<e.length;++t){var c=wpkqcg_qrcode_b64toBlob(e[t].src.replace("data:image/png;base64,",""),"image/png"),o="kaya-qr-code.png";if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(c,o);else{var n=URL.createObjectURL(c),r=document.createElement("a");r.style.display="none",r.setAttribute("href",n),r.setAttribute("target","_blank"),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("download",o),document.body.appendChild(r),r.click(),document.body.removeChild(r),r=null}}}function wpkqcg_qrcode_b64toBlob(e,t,c){t=t||"",c=c||512;for(var o=atob(e),n=[],r=0;r<o.length;r+=c){for(var g=o.slice(r,r+c),s=Array(g.length),d=0;d<g.length;d++)s[d]=g.charCodeAt(d);var l=new Uint8Array(s);n.push(l)}return new Blob(n,{type:t})}function wpkqcg_qrcode_light_form_toggle(){for(var e=document.getElementsByClassName("wpkqcg_shortcode_generator_hide"),t=0;t<e.length;t++)"none"==e.item(t).style.display?e.item(t).style.display="table":e.item(t).style.display="none"}